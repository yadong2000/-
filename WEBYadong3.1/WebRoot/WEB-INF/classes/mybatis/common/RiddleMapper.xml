<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.creditease.sia.server.domain.Riddle" >
  <resultMap id="RiddleBaseResultMap" type="com.creditease.sia.server.domain.Riddle" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Mar 01 23:16:00 CST 2015.
    -->
    <id column="riddle_id" property="riddleId" jdbcType="INTEGER" />
    <result column="riddle_name"       property="riddleName" jdbcType="VARCHAR" />
    <result column="riddle_side"       property="riddleSide" jdbcType="VARCHAR" />
    <result column="riddle_bottom"     property="riddleBottom" jdbcType="VARCHAR" />
    <result column="riddle_con_leavl"  property="riddleConLeavl" jdbcType="VARCHAR" />
    <result column="riddle_hot"        property="riddleHot" jdbcType="INTEGER" />
    <result column="riddle_image"      property="riddleImage" jdbcType="VARCHAR" />                                                         
    <result column="riddle_time"       property="riddleTime" jdbcType="DATE" />
    <result column="riddle_tip"        property="riddleTip" jdbcType="VARCHAR" />
    <result column="riddle_userName"   property="riddleUserName" jdbcType="VARCHAR" />
    <result column="riddle_type"       property="riddleType" jdbcType="INTEGER" />
    <result column="riddle_count"      property="riddleCount" jdbcType="INTEGER" />
  </resultMap>
   <!-- 返回多个值 实体类 -->
    <resultMap id="RiddleAnCommentAndUserBaseResultMap" type="com.creditease.sia.server.domain.Riddle" >
  
 
    
  </resultMap>

  <sql id="Base_Column_List" >
    
    riddle_id, riddle_name, riddle_side, riddle_bottom, riddle_con_leavl, riddle_hot, 
    riddle_image, riddle_time, riddle_tip ,riddle_userName,riddle_type,riddle_count
  </sql>
  <select id="selectByPrimaryKey" resultMap="RiddleBaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from xiao_riddle
    where riddle_id = #{riddleId,jdbcType=INTEGER}
  </select>
  
   <select id="queryPage"  parameterType="map"  resultMap="RiddleBaseResultMap">
  		select  <include refid="Base_Column_List" /> from xiao_riddle  limit #{startNum},#{endNum}
  </select>
  
    <select id="queryTotalCount" resultType="java.lang.Integer">
    <!--   select count(*) from  xiao_riddle t ,xiao_riddle r ,xiao_user u   where t.riddle_id = r.riddle_id and t.user_id = u.id  -->
         select count(*) from  xiao_riddle t 
    </select>
 
   <select id="QueryRiddleToComment"  parameterType="map"  resultMap="RiddleBaseResultMap">
  	<!-- select *  from xiao_riddle t ,xiao_riddle r ,xiao_user u where t.riddle_id = r.riddle_id and t.user_id = u.id  -->
  		select  <include refid="Base_Column_List" />  from xiao_riddle t   limit #{startNum},#{endNum}
   </select>
   <select id="QueryRiddleToCommentByPage"  parameterType="map"  resultMap="RiddleBaseResultMap">
  		select  <include refid="Base_Column_List" />  from xiao_riddle t  order by riddle_time desc limit #{startNum},#{endNum}
   </select>
     <select id="selectCommentCountByRiddleId" parameterType="java.lang.Integer" resultType="java.lang.Integer">
      select count(*) from   xiao_riddle_comment t  where t.riddle_id = #{riddleId}
       
   </select>
   <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from xiao_riddle
    where riddle_id = #{riddleId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.creditease.sia.server.domain.Riddle" >
    insert into xiao_riddle (riddle-id, riddle_name, riddle_side, 
      riddle_bottom, riddle_con_leavl, riddle_hot, 
      riddle_image, riddle_time, riddle_tip
      )
    values (#{riddleId,jdbcType=INTEGER}, #{riddleName,jdbcType=VARCHAR}, #{riddleSide,jdbcType=VARCHAR}, 
      #{riddleBottom,jdbcType=VARCHAR}, #{riddleConLeavl,jdbcType=VARCHAR}, #{riddleHot,jdbcType=INTEGER}, 
      #{riddleImage,jdbcType=VARCHAR}, #{riddleTime,jdbcType=TIMESTAMP}, #{riddleTip,jdbcType=VARCHAR}
      )
  </insert>
  
  <insert id="save" parameterType="com.creditease.sia.server.domain.Riddle" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Mar 01 23:16:00 CST 2015.
    -->
    insert into xiao_riddle
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="riddleId != null" >
        riddle_id,
      </if>
      <if test="riddleName != null" >
        riddle_name,
      </if>
      <if test="riddleSide != null" >
        riddle_side,
      </if>
      <if test="riddleBottom != null" >
        riddle_bottom,
      </if>
      <if test="riddleConLeavl != null" >
        riddle_con_leavl,
      </if>
      <if test="riddleHot != null" >
        riddle_hot,
      </if>
      <if test="riddleImage != null" >
        riddle_image,
      </if>
      
        riddle_time,
      
      <if test="riddleTip != null" >
        riddle_tip,
      </if>
       <if test="riddleUserName != null" >
       riddle_userName,
      </if>
        <if test="riddleType != null" >
        riddle_type,
      </if>
        <if test="riddleCount != null" >
        riddle_count,
      </if>
          <!--
      <result column="riddle_userName"   property="riddleUserName" jdbcType="VARCHAR" />
    <result column="riddle_type"        property="riddleType" jdbcType="INTEGER" />
    <result column="riddle_count"        property="riddleCount" jdbcType="INTEGER" />
    -->
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="riddleId != null" >
        #{riddleId,jdbcType=INTEGER},
      </if>
      <if test="riddleName != null" >
        #{riddleName,jdbcType=VARCHAR},
      </if>
      <if test="riddleSide != null" >
        #{riddleSide,jdbcType=VARCHAR},
      </if>
      <if test="riddleBottom != null" >
        #{riddleBottom,jdbcType=VARCHAR},
      </if>
      <if test="riddleConLeavl != null" >
        #{riddleConLeavl,jdbcType=VARCHAR},
      </if>
      <if test="riddleHot != null" >
        #{riddleHot,jdbcType=INTEGER},
      </if>
      <if test="riddleImage != null" >
        #{riddleImage,jdbcType=VARCHAR},
      </if>
      current_timestamp()   ,
       
      <if test="riddleTip != null" >
        #{riddleTip,jdbcType=VARCHAR},
      </if>
        <if test="riddleUserName != null" >
          #{riddleUserName,jdbcType=VARCHAR},
      </if>
      <if test="riddleType != null" >
          #{riddleType,jdbcType=INTEGER},
      </if>
      <if test="riddleCount != null" >
          #{riddleCount,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.creditease.sia.server.domain.Riddle" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Mar 01 23:16:00 CST 2015.
    -->
    update xiao_riddle
    <set >
      <if test="riddleName != null" >
        riddle_name = #{riddleName,jdbcType=VARCHAR},
      </if>
      <if test="riddleSide != null" >
        riddle_side = #{riddleSide,jdbcType=VARCHAR},
      </if>
      <if test="riddleBottom != null" >
        riddle_bottom = #{riddleBottom,jdbcType=VARCHAR},
      </if>
      <if test="riddleConLeavl != null" >
        riddle_con_leavl = #{riddleConLeavl,jdbcType=VARCHAR},
      </if>
      <if test="riddleHot != null" >
        riddle_hot = #{riddleHot,jdbcType=INTEGER},
      </if>
      <if test="riddleImage != null" >
        riddle_image = #{riddleImage,jdbcType=VARCHAR},
      </if>
      <if test="riddleTime != null" >
        riddle_time = #{riddleTime,jdbcType=TIMESTAMP},
      </if>
      <if test="riddleTip != null" >
        riddle_tip = #{riddleTip,jdbcType=VARCHAR},
      </if>
    </set>
    where riddle_id = #{riddleId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.creditease.sia.server.domain.Riddle" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Mar 01 23:16:00 CST 2015.
    -->
    update xiao_riddle
    set riddle_name = #{riddleName,jdbcType=VARCHAR},
      riddle_side = #{riddleSide,jdbcType=VARCHAR},
      riddle_bottom = #{riddleBottom,jdbcType=VARCHAR},
      riddle_con_leavl = #{riddleConLeavl,jdbcType=VARCHAR},
      riddle_hot = #{riddleHot,jdbcType=INTEGER},
      riddle_image = #{riddleImage,jdbcType=VARCHAR},
      riddle_time = #{riddleTime,jdbcType=TIMESTAMP},
      riddle_tip = #{riddleTip,jdbcType=VARCHAR}
    where riddle_id = #{riddleId,jdbcType=INTEGER}
  </update>
</mapper>